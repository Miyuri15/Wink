{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/lib/actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { auth } from \"@clerk/nextjs/server\";\r\nimport prisma from \"./client\";\r\nimport { z } from \"zod\";\r\nimport { revalidatePath } from \"next/cache\";\r\n\r\nexport const switchFollow = async (userId: string) => {\r\n  const { userId: currentUserId } = auth();\r\n\r\n  if (!currentUserId) {\r\n    throw new Error(\"User is not authenticated!\");\r\n  }\r\n\r\n  try {\r\n    const existingFollow = await prisma.follower.findFirst({\r\n      where: {\r\n        followerId: currentUserId,\r\n        followingId: userId,\r\n      },\r\n    });\r\n\r\n    if (existingFollow) {\r\n      await prisma.follower.delete({\r\n        where: {\r\n          id: existingFollow.id,\r\n        },\r\n      });\r\n    } else {\r\n      const existingFollowRequest = await prisma.followRequest.findFirst({\r\n        where: {\r\n          senderId: currentUserId,\r\n          receiverId: userId,\r\n        },\r\n      });\r\n\r\n      if (existingFollowRequest) {\r\n        await prisma.followRequest.delete({\r\n          where: {\r\n            id: existingFollowRequest.id,\r\n          },\r\n        });\r\n      } else {\r\n        await prisma.followRequest.create({\r\n          data: {\r\n            senderId: currentUserId,\r\n            receiverId: userId,\r\n          },\r\n        });\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong!\");\r\n  }\r\n};\r\n\r\nexport const switchBlock = async (userId: string) => {\r\n  const { userId: currentUserId } = auth();\r\n\r\n  if (!currentUserId) {\r\n    throw new Error(\"User is not Authenticated!!\");\r\n  }\r\n\r\n  try {\r\n    const existingBlock = await prisma.block.findFirst({\r\n      where: {\r\n        blockerId: currentUserId,\r\n        blockedId: userId,\r\n      },\r\n    });\r\n\r\n    if (existingBlock) {\r\n      await prisma.block.delete({\r\n        where: {\r\n          id: existingBlock.id,\r\n        },\r\n      });\r\n    } else {\r\n      await prisma.block.create({\r\n        data: {\r\n          blockerId: currentUserId,\r\n          blockedId: userId,\r\n        },\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong!\");\r\n  }\r\n};\r\n\r\nexport const acceptFollowRequest = async (userId: string) => {\r\n  const { userId: currentUserId } = auth();\r\n\r\n  if (!currentUserId) {\r\n    throw new Error(\"User is not Authenticated!!\");\r\n  }\r\n\r\n  try {\r\n    const existingFollowRequest = await prisma.followRequest.findFirst({\r\n      where: {\r\n        senderId: userId,\r\n        receiverId: currentUserId,\r\n      },\r\n    });\r\n\r\n    if (existingFollowRequest) {\r\n      await prisma.followRequest.delete({\r\n        where: {\r\n          id: existingFollowRequest.id,\r\n        },\r\n      });\r\n\r\n      await prisma.follower.create({\r\n        data: {\r\n          followerId: userId,\r\n          followingId: currentUserId,\r\n        },\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong!\");\r\n  }\r\n};\r\n\r\nexport const declineFollowRequest = async (userId: string) => {\r\n  const { userId: currentUserId } = auth();\r\n\r\n  if (!currentUserId) {\r\n    throw new Error(\"User is not Authenticated!!\");\r\n  }\r\n\r\n  try {\r\n    const existingFollowRequest = await prisma.followRequest.findFirst({\r\n      where: {\r\n        senderId: userId,\r\n        receiverId: currentUserId,\r\n      },\r\n    });\r\n\r\n    if (existingFollowRequest) {\r\n      await prisma.followRequest.delete({\r\n        where: {\r\n          id: existingFollowRequest.id,\r\n        },\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong!\");\r\n  }\r\n};\r\n\r\nexport const updateProfile = async (\r\n  prevState: { success: boolean; error: boolean },\r\n  payload: { formData: FormData; cover: string }\r\n) => {\r\n  const { formData, cover } = payload;\r\n  const fields = Object.fromEntries(formData);\r\n\r\n  const filteredFields = Object.fromEntries(\r\n    Object.entries(fields).filter(([_, value]) => value !== \"\")\r\n  );\r\n\r\n  const Profile = z.object({\r\n    cover: z.string().optional(),\r\n    name: z.string().max(60).optional(),\r\n    surname: z.string().max(60).optional(),\r\n    description: z.string().max(255).optional(),\r\n    city: z.string().max(60).optional(),\r\n    school: z.string().max(60).optional(),\r\n    work: z.string().max(60).optional(),\r\n    website: z.string().max(60).optional(),\r\n  });\r\n\r\n  const validatedFields = Profile.safeParse({ cover, ...filteredFields });\r\n\r\n  if (!validatedFields.success) {\r\n    console.log(validatedFields.error.flatten().fieldErrors);\r\n    return { success: false, error: true };\r\n  }\r\n\r\n  const { userId } = auth();\r\n\r\n  if (!userId) {\r\n    return { success: false, error: true };\r\n  }\r\n\r\n  try {\r\n    await prisma.user.update({\r\n      where: {\r\n        id: userId,\r\n      },\r\n      data: validatedFields.data,\r\n    });\r\n    return { success: true, error: false };\r\n  } catch (err) {\r\n    console.log(err);\r\n    return { success: false, error: true };\r\n  }\r\n};\r\n\r\nexport const switchLike = async (postId: number) => {\r\n  const { userId } = auth();\r\n\r\n  if (!userId) throw new Error(\"User is not authenticated!\");\r\n\r\n  try {\r\n    const existingLike = await prisma.like.findFirst({\r\n      where: {\r\n        postId,\r\n        userId,\r\n      },\r\n    });\r\n\r\n    if (existingLike) {\r\n      await prisma.like.delete({\r\n        where: {\r\n          id: existingLike.id,\r\n        },\r\n      });\r\n    } else {\r\n      await prisma.like.create({\r\n        data: {\r\n          postId,\r\n          userId,\r\n        },\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong\");\r\n  }\r\n};\r\n\r\nexport const addComment = async (postId: number, desc: string) => {\r\n  const { userId } = auth();\r\n\r\n  if (!userId) throw new Error(\"User is not authenticated!\");\r\n\r\n  try {\r\n    const createdComment = await prisma.comment.create({\r\n      data: {\r\n        desc,\r\n        userId,\r\n        postId,\r\n      },\r\n      include: {\r\n        user: true,\r\n      },\r\n    });\r\n\r\n    return createdComment;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw new Error(\"Something went wrong!\");\r\n  }\r\n};\r\n\r\nexport const addPost = async (formData: FormData, img: string) => {\r\n  const desc = formData.get(\"desc\") as string;\r\n\r\n  const Desc = z.string().min(1).max(255);\r\n\r\n  const validatedDesc = Desc.safeParse(desc);\r\n\r\n  if (!validatedDesc.success) {\r\n    //TODO\r\n    console.log(\"description is not valid\");\r\n    return;\r\n  }\r\n  const { userId } = auth();\r\n\r\n  if (!userId) throw new Error(\"User is not authenticated!\");\r\n\r\n  try {\r\n    await prisma.post.create({\r\n      data: {\r\n        desc: validatedDesc.data,\r\n        userId,\r\n        img,\r\n      },\r\n    });\r\n\r\n    revalidatePath(\"/\");\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const addStory = async (img: string) => {\r\n  const { userId } = auth();\r\n\r\n  if (!userId) throw new Error(\"User is not authenticated!\");\r\n\r\n  try {\r\n    const existingStory = await prisma.story.findFirst({\r\n      where: {\r\n        userId,\r\n      },\r\n    });\r\n\r\n    if (existingStory) {\r\n      await prisma.story.delete({\r\n        where: {\r\n          id: existingStory.id,\r\n        },\r\n      });\r\n    }\r\n    const createdStory = await prisma.story.create({\r\n      data: {\r\n        userId,\r\n        img,\r\n        expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000),\r\n      },\r\n      include: {\r\n        user: true,\r\n      },\r\n    });\r\n\r\n    return createdStory;\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\nexport const deletePost = async (postId: number) => {\r\n  const { userId } = auth();\r\n\r\n  if (!userId) throw new Error(\"User is not authenticated!\");\r\n\r\n  try {\r\n    await prisma.post.delete({\r\n      where: {\r\n        id: postId,\r\n        userId,\r\n      },\r\n    });\r\n    revalidatePath(\"/\")\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n};\r\n\r\n\r\n\r\n// \"use server\"\r\n\r\n// import { auth } from \"@clerk/nextjs/server\"\r\n// import prisma from \"./client\"\r\n// import { z } from \"zod\"\r\n// import { revalidatePath } from \"next/cache\"\r\n\r\n// export const switchFollow = async (userId:string) =>{\r\n//     const {userId:currentUserId} = auth()\r\n\r\n//     if(!currentUserId){\r\n//         throw new Error(\"User is not authenticated!\")\r\n//     }\r\n\r\n//     try{\r\n//         const exsitingFollow = await prisma.follower.findFirst({\r\n//             where:{\r\n//                 followerId:currentUserId,\r\n//                 followingId:userId,\r\n//             }\r\n//         })\r\n//         if(exsitingFollow){\r\n//             await prisma.follower.delete({\r\n//                 where:{\r\n//                     id:exsitingFollow.id,\r\n//                 }\r\n//             })\r\n//            }else{\r\n//             const exsitingFollowRequest = await prisma.followRequest.findFirst({\r\n//                 where:{\r\n//                     senderId:currentUserId,\r\n//                     receiverId:userId,\r\n//                 }\r\n//             })\r\n//             if(exsitingFollowRequest){\r\n//                 await prisma.followRequest.delete({\r\n//                     where:{\r\n//                         id:exsitingFollowRequest.id,\r\n//                     }\r\n//                 })\r\n//             }else{\r\n//                 await prisma.followRequest.create({\r\n//                     data:{\r\n//                         senderId:currentUserId,\r\n//                         receiverId:userId,\r\n//                     }\r\n//                 })\r\n\r\n//             }\r\n//         }\r\n//     }catch(err){\r\n//         console.log(err)\r\n//         throw new Error(\"Something went wrong!\")\r\n//     }\r\n// }\r\n\r\n// export const switchBlock = async (userId:string) =>{\r\n//     const {userId:currentUserId} = auth()\r\n\r\n//     if(!currentUserId){\r\n//         throw new Error(\"User is not authenticated!\")\r\n//     }\r\n\r\n//     try{\r\n//         const exsitingBlock = await prisma.block.findFirst({\r\n//             where:{\r\n//                 blockerId:currentUserId,\r\n//                 blockedId:userId,\r\n//             }\r\n//         })\r\n//         if(exsitingBlock){\r\n//             await prisma.block.delete({\r\n//                 where:{\r\n//                     id:exsitingBlock.id,\r\n//                 }\r\n//             })\r\n//         }else{\r\n//             await prisma.block.create({\r\n//                 data:{\r\n//                     blockerId:currentUserId,\r\n//                     blockedId:userId\r\n//                 }\r\n//             })\r\n//         }\r\n//     }catch(err){\r\n//        console.log(err)\r\n//        throw new Error(\"Something Went Wrong!\")\r\n//     }\r\n// }\r\n\r\n// export const acceptFollowRequest = async (userId:string)=>{\r\n//     const {userId:currentUserId} = auth()\r\n\r\n//     if(!currentUserId){\r\n//         throw new Error(\"User is not Authenicated!\")\r\n//     }\r\n// try{\r\n\r\n\r\n//     const exsitingFollowRequest = await prisma.followRequest.findFirst({\r\n//         where:{\r\n//             senderId:userId,\r\n//             receiverId:currentUserId,\r\n//         }\r\n//     })\r\n//     if(exsitingFollowRequest){\r\n//         await prisma.followRequest.delete({\r\n//             where:{\r\n//                 id:exsitingFollowRequest.id,\r\n//             }\r\n//         })\r\n//         await prisma.follower.create({\r\n//             data:{\r\n//                 followerId:userId,\r\n//                 followingId:currentUserId,\r\n//             }\r\n//         })\r\n//     }\r\n// }catch(err){\r\n//     console.log(err)\r\n//     throw new Error(\"Something went wrong!\")\r\n// }\r\n// }\r\n\r\n// export const declineFollowRequest = async (userId:string)=>{\r\n//     const {userId:currentUserId} = auth()\r\n\r\n//     if(!currentUserId){\r\n//         throw new Error(\"User is not Authenicated!\")\r\n//     }\r\n// try{\r\n\r\n\r\n//     const exsitingFollowRequest = await prisma.followRequest.findFirst({\r\n//         where:{\r\n//             senderId:userId,\r\n//             receiverId:currentUserId,\r\n//         }\r\n//     })\r\n//     if(exsitingFollowRequest){\r\n//         await prisma.followRequest.delete({\r\n//             where:{\r\n//                 id:exsitingFollowRequest.id,\r\n//             }\r\n//         })\r\n        \r\n//     }\r\n// }catch(err){\r\n//     console.log(err)\r\n//     throw new Error(\"Something went wrong!\")\r\n// }\r\n// }\r\n\r\n// export const updateProfile = async (prevState:{success:boolean, error:boolean},payload:{formData:FormData, cover:string})=> {\r\n// const {formData, cover}= payload\r\n// const fields = Object.fromEntries(formData)\r\n\r\n// const filteredFields = Object.fromEntries(\r\n//     Object.entries(fields).filter(([_,value])=> value !== \"\")\r\n// )\r\n\r\n// const profile = z.object({\r\n//  cover:z.string().optional(),\r\n//  name:z.string().max(60).optional(),\r\n//  surname:z.string().max(60).optional(),\r\n//  description:z.string().max(255).optional(),\r\n//  city:z.string().max(60).optional(),\r\n//  school:z.string().max(60).optional(),\r\n//  work:z.string().max(60).optional(),\r\n//  website:z.string().max(60).optional(),\r\n// })\r\n\r\n// const validatedFields = profile.safeParse({cover,...filteredFields})\r\n\r\n// if(!validatedFields.success){\r\n//     console.log(validatedFields.error.flatten().fieldErrors)\r\n//     return {success:false, error:true}\r\n// }\r\n// const {userId}= auth()\r\n// if(!userId) return  {success:false, error:true}\r\n// try{\r\n//     await prisma.user.update({\r\n//       where:{\r\n//         id:userId\r\n//       },\r\n//       data:validatedFields.data  \r\n//     })\r\n//     return  {success:true, error:false}\r\n// }catch(err){\r\n//     console.log(err)\r\n//     return {success:false, error:true}\r\n// }\r\n\r\n// }\r\n\r\n// export const switchLike = async (postId:number)=> {\r\n//     const {userId} = auth()\r\n\r\n//     if(!userId) throw new Error(\"User is not authenticated!\")\r\n\r\n//     try{\r\n//         const exsitingLike = await prisma.like.findFirst({\r\n//            where:{\r\n//             postId,\r\n//             userId\r\n//            } \r\n//         })\r\n\r\n//         if(exsitingLike){\r\n//             await prisma.like.delete({\r\n//                 where:{\r\n//                     id:exsitingLike.id\r\n//                 }\r\n//             })\r\n//         }\r\n//         else{\r\n//             await prisma.like.create({\r\n//                 data:{\r\n//                     postId,\r\n//                     userId,\r\n//                 }\r\n//             })\r\n//         }\r\n//     }catch(err){\r\n//         console.log(err)\r\n//         throw new Error (\"Something went wrong!\")\r\n//     }\r\n// }\r\n\r\n// export const addComment = async (postId:number , desc:string)=>{\r\n//     const {userId} = auth()\r\n//     if(!userId) throw new Error(\"User is not authenticated!\")\r\n\r\n//         try{\r\n//             const createdComment = await prisma.comment.create({\r\n//                 data:{\r\n//                     desc,\r\n//                     userId,\r\n//                     postId,\r\n//                 },\r\n//                 include:{\r\n//                     user:true,\r\n//                 }\r\n//             })\r\n//             return createdComment\r\n//         }catch(err){\r\n//             console.log(err)\r\n//             throw new Error(\"Something went wrong!\")\r\n//         }\r\n// }\r\n\r\n\r\n// export const addPost = async (formData:FormData,img:string)=>{\r\n//     const desc = formData.get(\"desc\") as string\r\n\r\n//     const Desc = z.string().min(1).max(255)\r\n//     const validateDesc = Desc.safeParse(desc)\r\n\r\n//     if(!validateDesc.success){\r\n//         //TODO\r\n//         console.log(\"description is not valid\")\r\n//         return\r\n//     }\r\n//     const {userId} = auth()\r\n//     if(!userId) throw new Error(\"User is not authenticated!\")\r\n\r\n//     try{\r\n//         await prisma.post.create({\r\n//             data:{\r\n//                 desc:validateDesc.data,\r\n//                 userId,\r\n//                 img,\r\n//             }\r\n//         })\r\n//         revalidatePath(\"/\");\r\n        \r\n//     }catch(err){\r\n//         console.log(err)\r\n//     }\r\n\r\n// }\r\n\r\n// export const addStory = async (img:string)=>{\r\n//     const {userId} = auth()\r\n//     if(!userId) throw new Error(\"User is not authenticated!\")\r\n\r\n//     try{\r\n\r\n//         const existingStory = await prisma.story.findFirst({\r\n//             where:{\r\n//                 userId\r\n//             }\r\n//         })\r\n//         if(existingStory){\r\n//             await prisma.story.delete({\r\n//                 where:{\r\n//                     id:existingStory.id\r\n//                 }\r\n//             })\r\n//         }\r\n//         const createdStory = await prisma.story.create({\r\n//             data:{\r\n//                 userId,\r\n//                 img,\r\n//                 expiresAt:new Date(Date.now() + 24 * 60 * 60 * 1000 ),\r\n//             },\r\n//             include:{\r\n//                 user:true\r\n//             }\r\n//         })\r\n//         return createdStory\r\n        \r\n//     }catch(err){\r\n//         console.log(err)\r\n//     }\r\n\r\n// }\r\n\r\n// export const deletePost = async (postId:number)=>{\r\n//     const {userId} = auth()\r\n//     if(!userId) throw new Error(\"User is not authenticated!\")\r\n    \r\n//         try{\r\n//             await prisma.post.delete({\r\n//                 where:{\r\n//                     id:postId,\r\n//                     userId\r\n//                 }\r\n//             })\r\n//             revalidatePath(\"/\")\r\n//         }catch(err){\r\n//             console.log(err)\r\n//         }\r\n    \r\n//     }"],"names":[],"mappings":"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"}},
    {"offset": {"line": 321, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/feed/CommentList.tsx"],"sourcesContent":["\"use client\"\r\nimport { addComment } from \"@/lib/actions\";\r\nimport { useUser } from \"@clerk/nextjs\";\r\nimport { User,Comment} from \"@prisma/client\";\r\nimport Image from \"next/image\"\r\nimport { useOptimistic, useState } from \"react\";\r\n\r\ntype CommentWithUser = Comment & {user:User}\r\n\r\nconst CommentList = ({comments,postId}:{comments:CommentWithUser[];postId:number})=>{\r\n\r\nconst {user} = useUser()\r\nconst [commentState, setCommentState] = useState(comments)\r\nconst [desc, setDesc] = useState(\"\")\r\n\r\nconst add = async ()=>{\r\n    if(!user || !desc) return;\r\n\r\n    addOptimisticComment({\r\n        id:Math.random(),\r\n        desc,\r\n        createdAt:new Date(Date.now()),\r\n        updatedAt:new Date(Date.now()),\r\n        userId:user.id,\r\n        postId:postId,\r\n        user:{\r\n            id:user.id,\r\n            username:\"Sending Please wait...\",\r\n            avatar:user.imageUrl || \"/noAvatar.png\",\r\n            cover:\"\",\r\n            description:\"\",\r\n            name:\"\",\r\n            city:\"\",\r\n            surname:\"\",\r\n            work:\"\",\r\n            school:\"\",\r\n            website:\"\",\r\n            createdAt: new Date(Date.now()),\r\n        }\r\n\r\n    });\r\n\r\n    try{\r\n        const createdComment = await addComment(postId,desc)\r\n        setCommentState((prev)=> [createdComment,...prev])\r\n    }catch(err){}\r\n\r\n}\r\n\r\nconst [optimisticComments,addOptimisticComment] = useOptimistic(commentState,\r\n    (state,value:CommentWithUser)=>[value,...state]\r\n)\r\n    return(\r\n        <div className=\"\">\r\n         {user && (<div className=\"flex items-center gap-4\">\r\n            <Image src={user.imageUrl || \"/noAvatar.png\"} alt=\"\" width={32} height={32} className=\"w-8 h-8 rounded-full\"/>\r\n               <div className=\"flex-1 flex items-center justify-between bg-slate-100 rounded-xl text-sm px-6 py-2 w-full\">\r\n                   <form action = {add}>\r\n                    <input type=\"text\" placeholder=\"Write a comment...\" className=\"bg-transparent outline-none flex-1\"\r\n                     onChange={e=>setDesc(e.target.value)} />\r\n                    <Image src=\"/emoji.png\" alt=\"\" width={16} height={16} className=\"cursor-pointer\"\r\n                    />\r\n                    </form>\r\n                </div>\r\n         </div> )}  \r\n        {/* COMMENT */}\r\n        {optimisticComments.map(comment=>(\r\n\r\n       <div className=\"flex gap-4 justify-between mt-6\" key={comment.id}>\r\n            {/* AVATAR */}\r\n            <Image src={comment.user.avatar || \"/noAvatar.png\"} alt=\"\" width={40} height={40} className=\"w-10 h-10 rounded-full\"/>\r\n            {/* DESCRIPTION */}\r\n            <div className=\"flex flex-col gap-2 flex-1\">\r\n                <span className=\"font-medium\">{comment.user.name && comment.user.surname ? comment.user.name + \"\" + comment.user.surname : comment.user.username}</span>\r\n                <p>{comment.desc}</p>\r\n            <div className=\"flex items-center gap-8 text-sm text-gray-500 mt-2\">\r\n                <div className=\"flex items-center gap-4\">\r\n                <Image src=\"/like.png\" alt=\"\" width={12} height={12} className=\"cursor-pointer w-4 h-4\"></Image>\r\n                <span className=\"text-gray-300\">|</span>\r\n                <span className=\"text-gray-500\">0 Likes</span>\r\n                </div>\r\n                <div className=\"\">Reply</div>\r\n            </div>\r\n            </div>\r\n            {/* ICON */}\r\n            <Image src=\"/more.png\" alt=\"\" width={16} height={16} className=\"cursor-pointer w-4 h-4\"></Image>\r\n        </div>\r\n         ))\r\n        }\r\n    </div>\r\n)\r\n}\r\n\r\nexport default CommentList"],"names":[],"mappings":"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"}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/feed/PostInteraction.tsx"],"sourcesContent":["\"use client\"\r\nimport { switchLike } from \"@/lib/actions\"\r\nimport { useAuth } from \"@clerk/nextjs\"\r\nimport Image from \"next/image\"\r\nimport { useOptimistic, useState } from \"react\"\r\n\r\nconst PostInteraction = ({postId, likes, commentNumber}:{postId:number, likes:string[], commentNumber:number})=>{\r\n\r\n    const {isLoaded,userId}= useAuth()\r\n    const [likeState , setLikeState] = useState({\r\n        likeCount:likes.length,\r\n        isLiked:userId ? likes.includes(userId) : false,\r\n    })\r\n\r\n    const [optimisticLike , switchOptimisticLike] = useOptimistic(likeState,(state,value)=>{\r\n        return{\r\n            likeCount: state.isLiked ? state.likeCount-1 : state.likeCount+1,\r\n            isLiked: !state.isLiked,\r\n        }\r\n    })\r\n\r\n    const likeAction = async ()=> {\r\n        switchOptimisticLike(\"\")\r\n        try{\r\n            switchLike(postId);\r\n            setLikeState((state)=> ({\r\n                likeCount: state.isLiked ? state.likeCount-1 : state.likeCount+1,\r\n                isLiked: !state.isLiked,\r\n    \r\n            }))\r\n        }catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n    return(\r\n        <div className=\"flex items-center justify-between text- my-4\">\r\n        <div className=\"flex gap-8\">\r\n            <div className=\"flex items-center gap-4 bg-slate-50 p-2 rounded-xl\">\r\n            <form action ={likeAction}>\r\n            <button>\r\n            <Image src={optimisticLike.isLiked ? \"/liked.png\" : \"/like.png\"} width={16} height={16} alt=\"\" className=\"cursor-pointer\"/>\r\n            </button>\r\n            </form>\r\n            <span className=\"text-gray-300\">|</span>\r\n            <span className=\"text-gray-500\">{optimisticLike.likeCount}<span className=\"hidden md:inline\"> Likes</span></span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4 bg-slate-100 p-2 rounded-xl\">\r\n            <Image src=\"/comment.png\" width={16} height={16} alt=\"\" className=\"cursor-pointer\"/>\r\n            <span className=\"text-gray-300\">|</span>\r\n            <span className=\"text-gray-500\">{commentNumber}<span className=\"hidden md:inline\"> Comments</span></span>\r\n            </div>\r\n\r\n        </div>\r\n        <div className=\"\">\r\n        <div className=\"flex items-center gap-4 bg-slate-100 p-2 rounded-xl\">\r\n            <Image src=\"/share.png\" width={16} height={16} alt=\"\" className=\"cursor-pointer\"/>\r\n            <span className=\"text-gray-300\">|</span>\r\n            <span className=\"text-gray-500\"><span className=\"hidden md:inline \"> Share</span></span>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n)\r\n}\r\n\r\nexport default PostInteraction"],"names":[],"mappings":";;;;;;;;;AAAA;;;;;;AAMA,MAAM,kBAAkB,CAAC,EAAC,MAAM,EAAE,KAAK,EAAE,aAAa,EAAuD;IAEzG,MAAM,EAAC,QAAQ,EAAC,MAAM,EAAC,GAAE,CAAA,GAAA,uLAAA,CAAA,UAAO,AAAD;IAC/B,MAAM,CAAC,WAAY,aAAa,GAAG,CAAA,GAAA,+MAAA,CAAA,WAAQ,AAAD,EAAE;QACxC,WAAU,MAAM,MAAM;QACtB,SAAQ,SAAS,MAAM,QAAQ,CAAC,UAAU;IAC9C;IAEA,MAAM,CAAC,gBAAiB,qBAAqB,GAAG,CAAA,GAAA,+MAAA,CAAA,gBAAa,AAAD,EAAE,WAAU,CAAC,OAAM;QAC3E,OAAM;YACF,WAAW,MAAM,OAAO,GAAG,MAAM,SAAS,GAAC,IAAI,MAAM,SAAS,GAAC;YAC/D,SAAS,CAAC,MAAM,OAAO;QAC3B;IACJ;IAEA,MAAM,aAAa;QACf,qBAAqB;QACrB,IAAG;YACC,CAAA,GAAA,qHAAA,CAAA,aAAU,AAAD,EAAE;YACX,aAAa,CAAC,QAAS,CAAC;oBACpB,WAAW,MAAM,OAAO,GAAG,MAAM,SAAS,GAAC,IAAI,MAAM,SAAS,GAAC;oBAC/D,SAAS,CAAC,MAAM,OAAO;gBAE3B,CAAC;QACL,EAAC,OAAM,KAAI;YACP,QAAQ,GAAG,CAAC;QAChB;IACJ;IACA,qBACI,wPAAC;QAAI,WAAU;;0BACf,wPAAC;gBAAI,WAAU;;kCACX,wPAAC;wBAAI,WAAU;;0CACf,wPAAC;gCAAK,QAAS;0CACf,cAAA,wPAAC;8CACD,cAAA,wPAAC,6HAAA,CAAA,UAAK;wCAAC,KAAK,eAAe,OAAO,GAAG,eAAe;wCAAa,OAAO;wCAAI,QAAQ;wCAAI,KAAI;wCAAG,WAAU;;;;;;;;;;;;;;;;0CAGzG,wPAAC;gCAAK,WAAU;0CAAgB;;;;;;0CAChC,wPAAC;gCAAK,WAAU;;oCAAiB,eAAe,SAAS;kDAAC,wPAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;;;;;;;kCAG7F,wPAAC;wBAAI,WAAU;;0CACf,wPAAC,6HAAA,CAAA,UAAK;gCAAC,KAAI;gCAAe,OAAO;gCAAI,QAAQ;gCAAI,KAAI;gCAAG,WAAU;;;;;;0CAClE,wPAAC;gCAAK,WAAU;0CAAgB;;;;;;0CAChC,wPAAC;gCAAK,WAAU;;oCAAiB;kDAAc,wPAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;;;;;;;;;;;;;0BAItF,wPAAC;gBAAI,WAAU;0BACf,cAAA,wPAAC;oBAAI,WAAU;;sCACX,wPAAC,6HAAA,CAAA,UAAK;4BAAC,KAAI;4BAAa,OAAO;4BAAI,QAAQ;4BAAI,KAAI;4BAAG,WAAU;;;;;;sCAChE,wPAAC;4BAAK,WAAU;sCAAgB;;;;;;sCAChC,wPAAC;4BAAK,WAAU;sCAAgB,cAAA,wPAAC;gCAAK,WAAU;0CAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhF;uCAEe"}},
    {"offset": {"line": 776, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 781, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/feed/PostInfo.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport Image from \"next/image\"\r\nimport { deletePost } from \"@/lib/actions\"\r\n\r\nconst PostInfo = ({postId}:{postId:number})=>{\r\n\r\n    const [open, setOpen] = useState(false)\r\n    const deletePostWithId = deletePost.bind(null,postId)\r\n\r\n    return(\r\n        <div className=\"relative\">\r\n            <Image src=\"/more.png\" width={16} height={16} alt=\"\"\r\n            onClick={()=>setOpen((prev)=>!prev)} className=\"cursor-pointer\"/>\r\n            {open && (\r\n                <div className=\"absolute top-4 right-0 bg-white p-4 w-32 rounded-lg flex flex-col gap-2 text-xs shadow-lg z-30 \">\r\n                    <span className=\"cursor-pointer\">View</span>\r\n                    <span className=\"cursor-pointer\">Re-post</span>\r\n                    <form action={deletePostWithId}>\r\n                        <button className=\"text-red-500\">Delete</button>\r\n                    </form>\r\n                </div>\r\n            )}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostInfo"],"names":[],"mappings":";;;;;;;;AAAA;;;;;AAMA,MAAM,WAAW,CAAC,EAAC,MAAM,EAAiB;IAEtC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,+MAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,mBAAmB,qHAAA,CAAA,aAAU,CAAC,IAAI,CAAC,MAAK;IAE9C,qBACI,wPAAC;QAAI,WAAU;;0BACX,wPAAC,6HAAA,CAAA,UAAK;gBAAC,KAAI;gBAAY,OAAO;gBAAI,QAAQ;gBAAI,KAAI;gBAClD,SAAS,IAAI,QAAQ,CAAC,OAAO,CAAC;gBAAO,WAAU;;;;;;YAC9C,sBACG,wPAAC;gBAAI,WAAU;;kCACX,wPAAC;wBAAK,WAAU;kCAAiB;;;;;;kCACjC,wPAAC;wBAAK,WAAU;kCAAiB;;;;;;kCACjC,wPAAC;wBAAK,QAAQ;kCACV,cAAA,wPAAC;4BAAO,WAAU;sCAAe;;;;;;;;;;;;;;;;;;;;;;;AAOzD;uCAEe"}},
    {"offset": {"line": 860, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 865, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/rightMenu/FriendRequestList.tsx"],"sourcesContent":["\"use client\"\r\nimport { acceptFollowRequest, declineFollowRequest } from \"@/lib/actions\"\r\nimport { FollowRequest, User } from \"@prisma/client\"\r\nimport Image from \"next/image\"\r\nimport { useOptimistic, useState } from \"react\"\r\n\r\ntype RequestWithUser = FollowRequest & {\r\n    sender: User\r\n}\r\nconst FriendRequestList = ({requests}:{requests:RequestWithUser[]})=>{\r\nconst [requestState,setRequestState]= useState(requests)\r\n\r\nconst accept = async (requestId:number, userId:string)=>{\r\n    removeOptimisticRequests(requestId)\r\n    try{\r\n        await acceptFollowRequest(userId)\r\n        setRequestState((prev) => prev.filter((req)=> req.id !== requestId))\r\n    }catch(err){\r\n        console.log(err)\r\n    }\r\n}\r\n\r\nconst decline = async (requestId:number, userId:string)=>{\r\n    removeOptimisticRequests(requestId)\r\n    try{\r\n        await declineFollowRequest(userId)\r\n        setRequestState((prev) => prev.filter((req)=> req.id !== requestId))\r\n    }catch(err){\r\n        console.log(err)\r\n    }\r\n}\r\n\r\n\r\nconst [optimisticRequests, removeOptimisticRequests] = useOptimistic(\r\n    requestState,\r\n    (state,value:number) => state.filter((req)=>req.id !== value)\r\n)\r\n\r\n    return(\r\n        <div className=\"\">\r\n        {optimisticRequests.map(request =>(\r\n\r\n        <div className=\"flex items-center justify-between\" key={request.id}>\r\n            <div className=\" flex items-center gap-4\">\r\n                <Image src={request.sender.avatar || \"/noAvatar.png\"} alt=\"\" width={40} height={40} className=\"w-10 h-10 rounded-full object-cover\"/>\r\n                <span className=\"font-semibold\"> {request.sender.name ? request.sender.name + \"\" : request.sender.username}</span>\r\n            </div>\r\n            <div className=\"flex gap-3 justify-end\">\r\n                <form action = {()=>accept(request.id, request.sender.id)}>\r\n                    <button>\r\n                    <Image src=\"/accept.png\" alt=\"\" width={20} height={20} className=\"cursor-pointer\"/>\r\n                    </button>\r\n                </form>\r\n                <form action = {()=>decline(request.id, request.sender.id)}>\r\n                    <button>\r\n                    <Image src=\"/reject.png\" alt=\"\" width={20} height={20} className=\"cursor-pointer\"/>\r\n                    </button>\r\n                </form>\r\n\r\n            </div>\r\n            \r\n        </div>\r\n    ))}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FriendRequestList"],"names":[],"mappings":";;;;;;;;AAAA;;;;;AASA,MAAM,oBAAoB,CAAC,EAAC,QAAQ,EAA8B;IAClE,MAAM,CAAC,cAAa,gBAAgB,GAAE,CAAA,GAAA,+MAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,SAAS,OAAO,WAAkB;QACpC,yBAAyB;QACzB,IAAG;YACC,MAAM,CAAA,GAAA,qHAAA,CAAA,sBAAmB,AAAD,EAAE;YAC1B,gBAAgB,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAO,IAAI,EAAE,KAAK;QAC7D,EAAC,OAAM,KAAI;YACP,QAAQ,GAAG,CAAC;QAChB;IACJ;IAEA,MAAM,UAAU,OAAO,WAAkB;QACrC,yBAAyB;QACzB,IAAG;YACC,MAAM,CAAA,GAAA,qHAAA,CAAA,uBAAoB,AAAD,EAAE;YAC3B,gBAAgB,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAO,IAAI,EAAE,KAAK;QAC7D,EAAC,OAAM,KAAI;YACP,QAAQ,GAAG,CAAC;QAChB;IACJ;IAGA,MAAM,CAAC,oBAAoB,yBAAyB,GAAG,CAAA,GAAA,+MAAA,CAAA,gBAAa,AAAD,EAC/D,cACA,CAAC,OAAM,QAAiB,MAAM,MAAM,CAAC,CAAC,MAAM,IAAI,EAAE,KAAK;IAGvD,qBACI,wPAAC;QAAI,WAAU;kBACd,mBAAmB,GAAG,CAAC,CAAA,wBAExB,wPAAC;gBAAI,WAAU;;kCACX,wPAAC;wBAAI,WAAU;;0CACX,wPAAC,6HAAA,CAAA,UAAK;gCAAC,KAAK,QAAQ,MAAM,CAAC,MAAM,IAAI;gCAAiB,KAAI;gCAAG,OAAO;gCAAI,QAAQ;gCAAI,WAAU;;;;;;0CAC9F,wPAAC;gCAAK,WAAU;;oCAAgB;oCAAE,QAAQ,MAAM,CAAC,IAAI,GAAG,QAAQ,MAAM,CAAC,IAAI,GAAG,KAAK,QAAQ,MAAM,CAAC,QAAQ;;;;;;;;;;;;;kCAE9G,wPAAC;wBAAI,WAAU;;0CACX,wPAAC;gCAAK,QAAU,IAAI,OAAO,QAAQ,EAAE,EAAE,QAAQ,MAAM,CAAC,EAAE;0CACpD,cAAA,wPAAC;8CACD,cAAA,wPAAC,6HAAA,CAAA,UAAK;wCAAC,KAAI;wCAAc,KAAI;wCAAG,OAAO;wCAAI,QAAQ;wCAAI,WAAU;;;;;;;;;;;;;;;;0CAGrE,wPAAC;gCAAK,QAAU,IAAI,QAAQ,QAAQ,EAAE,EAAE,QAAQ,MAAM,CAAC,EAAE;0CACrD,cAAA,wPAAC;8CACD,cAAA,wPAAC,6HAAA,CAAA,UAAK;wCAAC,KAAI;wCAAc,KAAI;wCAAG,OAAO;wCAAI,QAAQ;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;eAbrB,QAAQ,EAAE;;;;;;;;;;AAwB1E;uCAEe"}},
    {"offset": {"line": 1005, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1010, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/rightMenu/UserInfoCardInteraction.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { switchBlock, switchFollow } from \"@/lib/actions\";\r\nimport { useOptimistic, useState } from \"react\";\r\n\r\nconst UserInfoCardInteraction = ({\r\n  userId,\r\n  isUserBlocked,\r\n  isFollowing,\r\n  isFollowingSent,\r\n}: {\r\n  userId: string;\r\n  isUserBlocked: boolean;\r\n  isFollowing: boolean;\r\n  isFollowingSent: boolean;\r\n}) => {\r\n  const [userState, setUserState] = useState({\r\n    following: isFollowing,\r\n    blocked: isUserBlocked,\r\n    followingRequestSent: isFollowingSent,\r\n  });\r\n\r\n  const follow = async () => {\r\n    switchOptimisticState(\"follow\");\r\n    try {\r\n      await switchFollow(userId);\r\n      setUserState((prev) => ({\r\n        ...prev,\r\n        following: prev.following && false,\r\n        followingRequestSent:\r\n          !prev.following && !prev.followingRequestSent ? true : false,\r\n      }));\r\n    } catch (err) {}\r\n  };\r\n\r\n  const block = async () => {\r\n    switchOptimisticState(\"block\");\r\n    try {\r\n      await switchBlock(userId);\r\n      setUserState((prev) => ({\r\n        ...prev,\r\n        blocked: !prev.blocked,\r\n      }));\r\n    } catch (err) {}\r\n  };\r\n\r\n  const [optimisticState, switchOptimisticState] = useOptimistic(\r\n    userState,\r\n    (state, value: \"follow\" | \"block\") =>\r\n      value === \"follow\"\r\n        ? {\r\n            ...state,\r\n            following: state.following && false,\r\n            followingRequestSent:\r\n              !state.following && !state.followingRequestSent ? true : false,\r\n          }\r\n        : { ...state, blocked: !state.blocked }\r\n  );\r\n  return (\r\n    <>\r\n      <form action={follow}>\r\n        <button className=\"w-full bg-blue-500 text-white text-sm rounded-md p-2\">\r\n          {optimisticState.following\r\n            ? \"Following\"\r\n            : optimisticState.followingRequestSent\r\n            ? \"Friend Request Sent\"\r\n            : \"Follow\"}\r\n        </button>\r\n      </form>\r\n      <form action={block} className=\"self-end \">\r\n        <button>\r\n          <span className=\"text-red-400 text-xs cursor-pointer\">\r\n            {optimisticState.blocked ? \"Unblock User\" : \"Block User\"}\r\n          </span>\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserInfoCardInteraction;"],"names":[],"mappings":";;;;;;;AAAA;;;;AAKA,MAAM,0BAA0B,CAAC,EAC/B,MAAM,EACN,aAAa,EACb,WAAW,EACX,eAAe,EAMhB;IACC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,+MAAA,CAAA,WAAQ,AAAD,EAAE;QACzC,WAAW;QACX,SAAS;QACT,sBAAsB;IACxB;IAEA,MAAM,SAAS;QACb,sBAAsB;QACtB,IAAI;YACF,MAAM,CAAA,GAAA,qHAAA,CAAA,eAAY,AAAD,EAAE;YACnB,aAAa,CAAC,OAAS,CAAC;oBACtB,GAAG,IAAI;oBACP,WAAW,KAAK,SAAS,IAAI;oBAC7B,sBACE,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,oBAAoB,GAAG,OAAO;gBAC3D,CAAC;QACH,EAAE,OAAO,KAAK,CAAC;IACjB;IAEA,MAAM,QAAQ;QACZ,sBAAsB;QACtB,IAAI;YACF,MAAM,CAAA,GAAA,qHAAA,CAAA,cAAW,AAAD,EAAE;YAClB,aAAa,CAAC,OAAS,CAAC;oBACtB,GAAG,IAAI;oBACP,SAAS,CAAC,KAAK,OAAO;gBACxB,CAAC;QACH,EAAE,OAAO,KAAK,CAAC;IACjB;IAEA,MAAM,CAAC,iBAAiB,sBAAsB,GAAG,CAAA,GAAA,+MAAA,CAAA,gBAAa,AAAD,EAC3D,WACA,CAAC,OAAO,QACN,UAAU,WACN;YACE,GAAG,KAAK;YACR,WAAW,MAAM,SAAS,IAAI;YAC9B,sBACE,CAAC,MAAM,SAAS,IAAI,CAAC,MAAM,oBAAoB,GAAG,OAAO;QAC7D,IACA;YAAE,GAAG,KAAK;YAAE,SAAS,CAAC,MAAM,OAAO;QAAC;IAE5C,qBACE;;0BACE,wPAAC;gBAAK,QAAQ;0BACZ,cAAA,wPAAC;oBAAO,WAAU;8BACf,gBAAgB,SAAS,GACtB,cACA,gBAAgB,oBAAoB,GACpC,wBACA;;;;;;;;;;;0BAGR,wPAAC;gBAAK,QAAQ;gBAAO,WAAU;0BAC7B,cAAA,wPAAC;8BACC,cAAA,wPAAC;wBAAK,WAAU;kCACb,gBAAgB,OAAO,GAAG,iBAAiB;;;;;;;;;;;;;;;;;;AAMxD;uCAEe"}},
    {"offset": {"line": 1099, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1104, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/rightMenu/UpdateButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useFormStatus } from \"react-dom\";\r\n\r\nconst UpdateButton = () => {\r\n  const { pending } = useFormStatus();\r\n\r\n  return (\r\n    <button\r\n      className=\"bg-blue-500 p-2 mt-2 rounded-md text-white disabled:bg-opacity-50 disabled:cursor-not-allowed\"\r\n      disabled={pending}\r\n    >\r\n      {pending ? \"Updating...\" : \"Update\"}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default UpdateButton;"],"names":[],"mappings":";;;;;;AAAA;;;AAIA,MAAM,eAAe;IACnB,MAAM,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,sNAAA,CAAA,gBAAa,AAAD;IAEhC,qBACE,wPAAC;QACC,WAAU;QACV,UAAU;kBAET,UAAU,gBAAgB;;;;;;AAGjC;uCAEe"}},
    {"offset": {"line": 1126, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1131, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/src/app/components/rightMenu/UpdateUser.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { User } from \"@prisma/client\"\r\nimport { useActionState, useState } from \"react\"\r\nimport Image from \"next/image\"\r\nimport { updateProfile } from \"@/lib/actions\"\r\nimport {CldUploadWidget} from \"next-cloudinary\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport UpdateButton from \"./UpdateButton\"\r\n\r\nconst UpdateUser = ({user} : {user:User})=> {\r\n    const [cover, setCover] = useState<any>(false)\r\n    const [open,setOpen] = useState(false)\r\n\r\n    const [state, formAction] = useActionState(updateProfile,{success:false, error:false})\r\n   \r\n    const router = useRouter()\r\n\r\n    const handleClose = ()=>{\r\n        setOpen(false)\r\n        state.success && router.refresh()\r\n    }\r\n\r\n   \r\n   return(\r\n        <div className=\"\">\r\n            <span className = \"text-blue-500 text-xs cursor-pointer\" onClick = {()=>setOpen(true)}>Update</span>\r\n            {open && (<div className=\"absolute w-screen h-screen top-0 left-0 bg-black bg-opacity-65 flex items-center justify-center z-50 \">\r\n                <form action={(formData)=>formAction({formData,cover:cover?.secure_url|| \"\"})} className=\"p-12 bh-whte rounded-lg shadow-md flex flex-col gap-2 w-full md:w-1/2 xl:w-1/3 relative\">\r\n                   {/* TITLE */}\r\n                    <h1>Update Profile</h1>\r\n                <div className=\"mt-4 text-xs text-gray\">\r\n                   Use the navbar profile to change the avater or username \r\n                </div>\r\n                {/* COVER PIC UPLOAD */}\r\n\r\n             <CldUploadWidget\r\n              uploadPreset=\"social\"\r\n              onSuccess={(result) => setCover(result.info)}\r\n            >\r\n              {({ open }) => {\r\n                return (\r\n                  <div\r\n                    className=\"flex flex-col gap-4 my-4\"\r\n                    onClick={() => open()}\r\n                  >\r\n                    <label htmlFor=\"\">Cover Picture</label>\r\n                    <div className=\"flex items-center gap-2 cursor-pointer\">\r\n                      <Image\r\n                        src={user.cover || \"/noCover.png\"}\r\n                        alt=\"\"\r\n                        width={48}\r\n                        height={32}\r\n                        className=\"w-12 h-8 rounded-md object-cover\"\r\n                      />\r\n                      <span className=\"text-xs underline text-gray-600\">\r\n                        Change\r\n                      </span>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              }}\r\n            </CldUploadWidget>\r\n                {/* WRAPPER */}\r\n                <div className=\"flex flex-wrap justify-between gap-2 xl:gap-4 \">\r\n                    {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">First Name</label>\r\n                        <input type=\"text\" placeholder={user.name || \"Miyu\"} className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\"name=\"name\"/>\r\n                    </div>\r\n\r\n                   {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">Surname Name</label>\r\n                        <input type=\"text\" placeholder={user.surname || \"\"} className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"surname\"/>\r\n                    </div>\r\n\r\n                {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">Description</label>\r\n                        <input type=\"text\" placeholder={user.description || \"love yourself first\"} className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"description\"/>\r\n                    </div>\r\n\r\n                {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">City</label>\r\n                        <input type=\"text\" placeholder={user.city || \"Sri Lanka\"}className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"city\" />\r\n                    </div>\r\n\r\n                {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">Went to</label>\r\n                        <input type=\"text\" placeholder={user.school || \"SLIIT\"}className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"school\" />\r\n                    </div>\r\n\r\n                {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">Work at</label>\r\n                        <input type=\"text\" placeholder={user.work || \"MIYU\"}className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"work\" />\r\n                    </div>\r\n              {/* INPUT */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <label htmlFor=\"\" className=\"text-xs text-gray-500 \">Website</label>\r\n                        <input type=\"text\" placeholder={user.website || \"MIYU.dev\"} className=\"ring-1 ring-gray-300 p-[13px] rounded-md text-sm\" name=\"website\"/>\r\n                    </div>\r\n                </div>\r\n\r\n                <UpdateButton/>\r\n                {state.success && <span className=\"text-green-500\">Profile has been updated!</span>}\r\n                {state.error && <span className=\"text-red-500\">Something went wrong!</span>}\r\n                <div className=\"absolute text-xl right-2 top-3 cursor-pointer\" onClick={handleClose}>\r\n                    X\r\n                 </div>\r\n                </form>\r\n            </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UpdateUser"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1508, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}